<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Money Pilot</title>
    
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/shared/cards.css">
    <link rel="stylesheet" href="css/shared/graphs.css">
    <link rel="stylesheet" href="css/features/goals.css">
    <link rel="stylesheet" href="css/features/budgets.css">
    <link rel="stylesheet" href="css/features/savings.css">
</head>
<body>

<div class="app-layout">
    <aside class="sidebar">
        <div class="sidebar__top">
            <div class="logo">Money Pilot</div>
            <nav class="nav">
                <a href="#" class="nav__item active" data-tab="dashboard">Dashboard</a>
                <a href="#" class="nav__item" data-tab="budgets">Budgets</a>
                <a href="#" class="nav__item" data-tab="savings">Savings Planner</a>
                <a href="#" class="nav__item" data-tab="debts">Debts</a>
                <a href="#" class="nav__item" data-tab="goals">Goals</a>
            </nav>
        </div>
        <div class="sidebar__bottom">
            <div class="ai-card">Money Pilot AI</div>
        </div>
    </aside>

    <main class="main">
        <header class="main__header">
            <h1 class="page-title">Dashboard</h1>
            <div class="profile-avatar"></div>
        </header>

        <section class="main__content">
            <div class="tab active" id="dashboard">
                <div class="card trend_card">
                    <div class="card__header">
                        <span class="card__title">Balance Trend</span>
                        <span class="filter_badge">2025</span>
                    </div>

                    <div class="trend_value">
                        <h2 id="balance_total">₱0.00</h2>
                        <p>
                            <span id="balance_trend_pct">+0%</span> vs last month
                        </p>
                    </div>

                    <div class="trend_chart_container">
                        <canvas id="balance_trend_chart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="tab" id="debts">
                <section id="view-debts" class="view-section">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h3>Debt Tracker</h3>
                        <button class="btn btn-primary" onclick="openModal('debtModal')"><i class="fa-solid fa-plus"></i> Add Debt</button>
                    </div>
                    <div id="debt-container" class="grid-2"></div>
                </section>
            </div>

            <div class="tab" id="budgets">
                <section id="view-budgets" class="view-section">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h3>Your Budgets</h3>
                        <button class="btn btn-primary" onclick="openModal('budgetModal')"><i class="fa-solid fa-plus"></i> New Budget</button>
                    </div>
                    <div id="budget-container" class="grid-2"></div>
                </section>
            </div>
            <div class="tab" id="savings">
                <section id="view-planner" class="view-section">
                    <div class="grid-2" style="margin-bottom: 1.5rem;">
                        <div class="planner-stat-card">
                            <div style="position:relative; z-index:2;">
                                <label style="color:rgba(255,255,255,0.8); font-size:0.9rem;">Total Savings Goal</label>
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <input type="number" id="planner-main-goal" class="planner-input" style="font-size:1.5rem; font-weight:700; width:180px;" placeholder="0.00" onchange="updatePlannerSettings()">
                                    <select id="planner-period" class="planner-input" onchange="updatePlannerSettings()">
                                        <option value="Daily">Daily</option>
                                        <option value="Weekly">Weekly</option>
                                        <option value="Monthly" selected>Monthly</option>
                                        <option value="Yearly">Yearly</option>
                                    </select>
                                </div>
                                <div style="margin-top: 1.5rem;">
                                    <div style="font-size: 0.9rem; opacity: 0.9;">Required contribution:</div>
                                    <div id="planner-calc-result" style="font-size: 1.8rem; font-weight: 800;">₱0.00 <span style="font-size:1rem; font-weight:400;">/ mo</span></div>
                                </div>
                            </div>
                        </div>
            
                        <div class="card">
                            <div class="card-header">
                                <span class="card-title">Allocation Breakdown</span>
                            </div>
                            <div class="planner-chart-container">
                                <div class="planner-donut" id="planner-donut">
                                    <div class="planner-donut-hole">
                                        <span id="planner-donut-val" style="font-weight:700; font-size:1.2rem;">0%</span>
                                        <span style="font-size:0.75rem; color:var(--text-muted);">Allocated</span>
                                    </div>
                                </div>
                            </div>
                            <div id="planner-chart-legend" style="text-align:center; font-size:0.9rem; color:var(--text-muted);"></div>
                        </div>
                    </div>
            
                    <div class="card">
                        <div class="card-header">
                            <span class="card-title">Items to Buy</span>
                            <span id="planner-count-badge" class="filter-badge">0 / 9 Items</span>
                        </div>
                        
                        <div id="planner-items-list"></div>
            
                        <div style="background: var(--bg-body); padding: 15px; border-radius: 12px; margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                            <input type="text" id="new-item-name" style="flex:2; min-width:150px;" placeholder="Item Name (e.g. Laptop)">
                            <input type="number" id="new-item-cost" style="flex:1; min-width:100px;" placeholder="Cost">
                            <button class="btn btn-primary" onclick="addPlannerItem()">Add Item</button>
                        </div>
            
                        <div id="planner-ai-tips" style="margin-top: 1rem;"></div>
                    </div>
                </section>
            </div>
            <div class="tab" id="goals">
                <section id="view-goals" class="view-section">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h3>Savings Goals</h3>
                        <button class="btn btn-primary" onclick="openModal('goalModal')"><i class="fa-solid fa-plus"></i> New Goal</button>
                    </div>
                    <div id="goal-container" class="grid-2"></div>
                </section>
            </div>
        </section>
    </main>
</div>

<div id="debtModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeModal('debtModal')" style="position:absolute; top:1.5rem; right:1.5rem; cursor:pointer;"><i class="fa-solid fa-xmark"></i></span>
        <h3>Add Debt</h3>
        <form onsubmit="addDebt(event)">
            <div class="form-group">
                <label>Description</label>
                <input type="text" id="debtName" required>
            </div>
            <div class="form-group">
                <label>Amount Owesd</label>
                <input type="number" id="debtAmount" required>
            </div>
            <div class="form-group">
                <label>Due Date</label>
                <input type="date" id="debtDate" required>
            </div>
            <button class="btn btn-primary" style="width: 100%;">Save Debt</button>
        </form>
    </div>
</div>

<div id="goalModal" class="modal">
    <div class="modal-content">
        <div style="display:flex; justify-content:space-between; margin-bottom:1rem;">
            <h3>New Savings Goal</h3>
            <i class="fa-solid fa-xmark" onclick="closeModal('goalModal')" style="cursor:pointer; font-size:1.2rem;"></i>
        </div>
        
        <form onsubmit="addGoal(event)">
            <label style="text-align:center; margin-bottom:10px;">Select Goal Type</label>
            <div class="goal-icons-grid">
                <label>
                    <input type="radio" name="goalIcon" value="fa-car" class="goal-radio">
                    <div class="goal-icon-label"><i class="fa-solid fa-car"></i></div>
                </label>
                <label>
                    <input type="radio" name="goalIcon" value="fa-house" class="goal-radio">
                    <div class="goal-icon-label"><i class="fa-solid fa-house"></i></div>
                </label>
                <label>
                    <input type="radio" name="goalIcon" value="fa-graduation-cap" class="goal-radio">
                    <div class="goal-icon-label"><i class="fa-solid fa-graduation-cap"></i></div>
                </label>
                <label>
                    <input type="radio" name="goalIcon" value="fa-plane" class="goal-radio">
                    <div class="goal-icon-label"><i class="fa-solid fa-plane"></i></div>
                </label>
                <label>
                    <input type="radio" name="goalIcon" value="fa-star" class="goal-radio" checked>
                    <div class="goal-icon-label"><i class="fa-solid fa-star"></i></div>
                </label>
            </div>

            <div class="form-group">
                <label>Goal Name</label>
                <input type="text" id="goalName" placeholder="e.g. New Laptop" required>
            </div>
            <div class="form-grid-2">
                <div class="form-group">
                    <label>Target Amount</label>
                    <input type="number" id="goalTarget" required oninput="calculateGoalAI()">
                </div>
                <div class="form-group">
                    <label>Target Date</label>
                    <input type="date" id="goalDate" required onchange="calculateGoalAI()">
                </div>
            </div>

            <div class="card" style="background: var(--primary-light); border: 1px solid var(--primary); padding: 12px; margin-bottom: 1rem; border-radius: 8px;">
                <div style="display:flex; gap:10px; align-items:flex-start;">
                    <i class="fa-solid fa-robot" style="color:var(--primary); margin-top:3px;"></i>
                    <div>
                        <div style="font-weight:700; color:var(--primary); font-size:0.85rem;">AI Estimation</div>
                        <div id="goalAIPreview" style="font-size:0.85rem; color:var(--text-main);">Enter details to see savings plan.</div>
                    </div>
                </div>
            </div>

            <button class="btn btn-primary" style="width: 100%;">Create Goal</button>
        </form>
        
        <div style="margin-top: 1.5rem; border-top: 1px solid var(--border); padding-top: 1rem;">
            <label>Common Goals:</label>
            <div style="display:flex; gap:8px; flex-wrap:wrap;">
                <button type="button" class="badge filter-badge" onclick="fillGoal('Emergency Fund', 20000)">Emergency Fund</button>
                <button type="button" class="badge filter-badge" onclick="fillGoal('Vacation', 50000)">Vacation</button>
                <button type="button" class="badge filter-badge" onclick="fillGoal('Gadget Upgrade', 60000)">Gadget</button>
            </div>
        </div>
    </div>
</div>

<div id="budgetModal" class="modal">
    <div class="modal-content">
        <div style="display:flex; justify-content:space-between; margin-bottom:1.5rem;">
            <h3>Create New Budget</h3>
            <i class="fa-solid fa-xmark" onclick="closeModal('budgetModal')" style="cursor:pointer; font-size:1.2rem;"></i>
        </div>
        <form onsubmit="addBudget(event)">
            <div class="form-group">
                <label>Budget Name</label>
                <input type="text" id="budgetName" placeholder="e.g. Weekly Groceries" required>
            </div>
            <div class="form-grid-2">
                <div class="form-group">
                    <label>Period</label>
                    <select id="budgetPeriod">
                        <option value="Month">Monthly</option>
                        <option value="Week">Weekly</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Currency</label>
                    <select disabled><option>PHP ()</option></select>
                </div>
            </div>
            <div class="form-group">
                <label>Limit Amount</label>
                <input type="number" id="budgetLimit" required placeholder="0.00" step="0.01">
            </div>
            <div class="form-grid-2">
                <div class="form-group">
                    <label>Category</label>
                    <select id="budgetCategory">
                        <option value="All">All Categories</option>
                        <option value="Food">Food & Dining</option>
                        <option value="Transport">Transport</option>
                        <option value="Utilities">Utilities</option>
                        <option value="Shopping">Shopping</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Account</label>
                    <select id="budgetAccount">
                        <option value="All">All Accounts</option>
                        <option value="Cash">Cash Wallet</option>
                        <option value="Bank">Bank Account</option>
                    </select>
                </div>
            </div>
            <div class="toggle-wrapper">
                <label style="margin:0;">Notify when exceeded</label>
                <label class="switch">
                    <input type="checkbox" id="budgetNotify" checked>
                    <span class="slider"></span>
                </label>
            </div>
            <button class="btn btn-primary" style="width: 100%;">Create Budget</button>
        </form>
    </div>
</div>

<script type="module" src="js/core/app.js"></script>

</body>
</html>